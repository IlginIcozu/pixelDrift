let w,h,pix=1,s,c,pg,pg2,img,sh,i,f,g,k,frameMod,pgStr,aniChooser,hyperMeter,blurShader,blurShader2,rect1C,rect2C,pitchShift,seed=99999999*fxrand(),contChooser,colCChooser,celColChooser,player1,player2,player3,buffer1,buffer2,buffer3,buffer4,buffer5,buffer6,buffer7,uOctave,monoStr,bgStr,coun=0,shaderChooser,rect1X,rect1Y,rect2X,rect2Y,border;function preload(){console.log(seed),noiseSeed(seed),randomSeed(seed),sh=loadShader("pix.vert","pix.frag"),blurShader=loadShader("blur.vert","blur.frag"),blurShader2=loadShader("blur2.vert","blur2.frag")}function setup(){c=createCanvas(w=1e3,h=1e3,WEBGL),pixelDensity(pix),(f=createGraphics(w,h)).pixelDensity(pix),f.colorMode(HSB,360,100,100,1),(pg=createGraphics(w,h)).pixelDensity(pix),pg.noStroke(),(g=createGraphics(w,h,WEBGL)).pixelDensity(pix),g.colorMode(HSB,360,100,100,1),g.background(0,0,80),(k=createGraphics(w,h,WEBGL)).colorMode(HSB,360,100,100,1),k.background(30,8,90),k.pixelDensity(pix),f.background(0,0,10),pgCh=random([1,2,3,1,2]);let $=[20,50,100,200,20,50];if(frameMod=$[floor(random($.length))],s=random([50,50,100,100,300,200]),pgStr=random([0,255,255,255,255]),pgCh=random([1,2,3,1,2]),aniChooser=random(1),rect1C=random(1),rect2C=random(1),3==pgCh&&(pgStr=0),pgStr=255,rect1C<.7)for(let e=0;e<h;e+=s)for(let r=0;r<w;r+=s)pg.fill(random([0,127,255]),random([.1,127,255]),0),pg.rect(r,e,s,s);if((pg2=createGraphics(w,h)).pixelDensity(pix),pg2.noStroke(),rect2C<.7)for(let o=0;o<h;o+=s)for(let t=0;t<w;t+=s)pg2.fill(pgStr),pg2.rect(t,o,s,s);(img=createGraphics(w,h)).pixelDensity(pix),img.imageMode(CENTER),img.colorMode(HSB,360,100,100,1),img.rectMode(CENTER),f.rectMode(CENTER);let _=w/10;for(let l=0;l<=width;l+=_){let n=random(1);n>.7?f.beginShape(LINES):n>.4?f.beginShape(QUADS):f.beginShape(TRIANGLES);for(let m=0;m<=height;m+=_)f.fill(random([0,40,150,220]),0,random(60,100)),f.endShape(CLOSE),f.noStroke(),f.rect(l,m,random(_/2,_)),f.stroke(random([0,40,150,220]),0,random(0,10)),f.line(l-random(_/2,_)*random([-1,1]),m-random(_/2,_)*random([-1,1]),l+random(_/2,_)*random([-1,1]),m+random(_/2,_)*random([-1,1]))}for(let p=0;p<3e4;p++){let u=random(width),a=random(height),d=noise(.01*u,.01*a)/50;f.noFill(),f.stroke(0,0,90,2*d),f.strokeWeight(random(.5,1)),f.ellipse(u,a,random(100))}img.image(f,w/2,h/2);let U=random([0,1]);celColChooser=random(1);let C=random(1);contChooser=random(1),colCChooser=random(1),shaderChooser=random(1),colCChooser<.15&&(celColChooser=.5),shader(sh),sh.setUniform("resolution",[w*pix,h*pix]),sh.setUniform("pg",pg),sh.setUniform("pg2",pg2),sh.setUniform("img",img),sh.setUniform("ak",random([1,10,5,20])),sh.setUniform("dirX",random([-1,1,0,0])),sh.setUniform("dirY",random([-1,1,0,0])),sh.setUniform("dirX1",random([-1,1,-1,0])),sh.setUniform("dirY1",random([-1,1,-1,0])),sh.setUniform("pgC",pgCh),sh.setUniform("aniC",aniChooser),sh.setUniform("timeM",random([2,4,8,2,4,8,12])),sh.setUniform("onOff",U),sh.setUniform("celCol",celColChooser),sh.setUniform("satC",C),sh.setUniform("contC",contChooser),sh.setUniform("colC",colCChooser),hyperMeter=random([4,8,8,8,12,12,16,16,8,8,4,4]),frameRate(random([30,60,25,25,30,25])),uSqr=0,roundInt=4,uPi=1,uAmp=random(.25,.35),uOctave=round(random(1,2.5),roundInt),uFbmAmp=round(random(30,80),roundInt),uAngleC=round(random(1),roundInt),uAniSpeed=random([2250,2250,2500,2500,3e3,3e3,3e3,3e3]),uAmp2=random(.25,.35),uOctave2=round(random(1,2.5),roundInt),uFbmAmp2=round(random(30,80),roundInt),uAngleC2=round(random(1),roundInt),uAniSpeed2=random([2250,2250,2500,2500,3e3,3e3,3e3,3e3]),rect1X=random([250,750]),rect1Y=random([250,750]),rect2X=random([250,750]),rect2Y=random([250,750]),border=random(1)}function draw(){let $=(random(w/s)^frameCount/s)*s,e=(random(h/s)^frameCount/s)*s;if(pg.fill(random([0,127,255]),random([0,127,255]),0),pg.rect($^e,e,2*s,2*s),pg2.fill(random([20,50,100]),2*random([20,50,100]),0),yamuk($^e,e,2*s,2*s),border<.6&&(pg2.push(),pg2.fill(255),yamuk(rect1X,rect1Y,w/2,h/2),yamuk(rect2X,rect2Y,w/2,h/2),pg2.pop()),blurShader.setUniform("uTexture0",pg),blurShader.setUniform("u_time",millis()/1e3),blurShader.setUniform("uResolution",[width*pix,height*pix]),blurShader.setUniform("u_amp",uAmp),blurShader.setUniform("u_octave",uOctave),blurShader.setUniform("u_fbmAmp",uFbmAmp),blurShader.setUniform("u_angleC",uAngleC),blurShader.setUniform("u_sqr",uSqr),blurShader.setUniform("u_anispd",uAniSpeed),g.noStroke(),g.shader(blurShader),g.translate(-width/2,-height/2),g.rect(0,0,width,height),blurShader2.setUniform("uTexture0",pg2),blurShader2.setUniform("u_time",millis()/1e3),blurShader2.setUniform("uResolution",[width*pix,height*pix]),blurShader2.setUniform("u_amp",uAmp2),blurShader2.setUniform("u_octave",uOctave2),blurShader2.setUniform("u_fbmAmp",uFbmAmp2),blurShader2.setUniform("u_angleC",uAngleC2),blurShader2.setUniform("u_sqr",uSqr),blurShader2.setUniform("u_anispd",uAniSpeed2),k.noStroke(),k.shader(blurShader2),k.translate(-width/2,-height/2),k.rect(0,0,width,height),img.image(c,w/2,h/2),frameCount%frameMod==0){let r=random([25,40,100,25,40,10,100,100,200]);for(let o=0;o<h;o+=r)for(let t=0;t<w;t+=r)pg.fill(random([0,127,86]),random([0,127,86]),0),pg.rect(t,o,2*r,2*r);sh.setUniform("ak",random([1,10,5,20,10,5,10,20,5])),sh.setUniform("dirX1",random([-1,1,0,0])),sh.setUniform("dirY1",random([-1,1,0,0])),sh.setUniform("dur",random([1,0,0,0]))}if(frameCount%(frameMod*hyperMeter)==0){sh.setUniform("dirX",random([-1,1,0,0])),sh.setUniform("dirY",random([-1,1,0,0])),rect1X=random([250,750,width/2,250,750]),rect1Y=random([250,750]),rect2X=random([250,750,width/2,250,750]),rect2Y=random([250,750]);for(let _=0;_<random([2,10,30,5,2,10]);_++)for(let l=0;l<1*width;l++){let n=random(width),m=random(height),p=noise(.01*n,.01*m)/50;img.noFill(),img.stroke(0,0,random([10,90,90]),2*p),img.strokeWeight(random(.5,1)),img.ellipse(n,m,random(100))}}if(mouseIsPressed&&1==(coun+=1)){celColChooser>.6||(celColChooser=random(1)),sh.setUniform("dur",1),sh.setUniform("contC",0),sh.setUniform("celCol",celColChooser);for(let u=0;u<5;u++)for(let a=0;a<1*width;a++){let d=random(width),U=random(height),C=noise(.01*d,.01*U)/50;img.noFill(),img.stroke(0,0,random([0,100,100,90]),2*C),img.strokeWeight(random(.5,1)),img.ellipse(d,U,random(100))}coun=0}sh.setUniform("pg",g),sh.setUniform("img",img),shaderChooser<.65?sh.setUniform("pg2",k):sh.setUniform("pg2",pg2),sh.setUniform("time",millis()),quad(-1,-1,1,-1,1,1,-1,1)}function mouseReleased(){sh.setUniform("contC",contChooser)}function yamuk($,e,r,o){pg2.beginShape(),pg2.noStroke(),pg2.vertex($-r/2+random(-20,20),e-o/2+random(-20,20)),pg2.vertex($+r/2+random(-20,20),e-o/2+random(-20,20)),pg2.vertex($+r/2+random(-20,20),e+o/2+random(-20,20)),pg2.vertex($-r/2+random(-20,20),e+o/2+random(-20,20)),pg2.endShape()}
